<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>iPhone Dialpad â€“ Replica</title>
<style>
  :root{
    --bg:#000;
    --key:#2b2b2d;           /* dark circular keys */
    --key-hover:#37373a;
    --key-press:#1f1f21;
    --text:#fff;
    --sub:#9a9aa1;
    --accent:#0ac75a;        /* call button green */
    --ios-blue:#0a84ff;      /* active tab */
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-top: env(safe-area-inset-top, 0px);
    --font:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    font-family:var(--font);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    justify-content:center;
  }

  /* Phone canvas (keeps proportions similar to iPhone screens) */
  .phone{
    position:relative;
    width:min(430px, 100vw);
    height:100dvh;
    overflow:hidden;
    background:var(--bg);
  }

  /* Status bar (top) */
  .status{
    position:absolute; inset:0 0 auto 0;
    height:44px; padding-top:var(--safe-top);
    display:flex; align-items:flex-end; justify-content:space-between;
    padding: 0 14px calc(6px + var(--safe-top));
    font-weight:600;
    letter-spacing:0.2px;
  }
  .status .right{
    display:flex; align-items:center; gap:8px; font-size:12px;
  }
  .pill{
    display:inline-flex; align-items:center; gap:4px;
    background:#1a1a1c; color:#ffcd00; border-radius:9px; padding:2px 6px; font-size:11px;
  }
  .icon{display:inline-block; vertical-align:middle}

  /* Number display area (appears when you type) */
  .display{
    position:absolute; left:0; right:0; top:64px;
    min-height:56px;
    display:flex; align-items:center; justify-content:center;
    font-size:36px; font-weight:500; letter-spacing:1px;
    transition:opacity .2s ease;
    user-select:text;
  }
  .hint{
    position:absolute; left:0; right:0; top:120px;
    text-align:center; color:var(--sub); font-size:14px;
  }

  /* Keypad grid */
  .grid{
    position:absolute; left:0; right:0;
    top: calc(150px); /* leaves room for display */
    bottom: 120px;    /* leaves room for call + tab bar */
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    grid-auto-rows:1fr;
    gap:18px 18px;
    padding:0 34px;
  }
  /* maintain circle sizing similar to iOS */
  .key{
    background:var(--key);
    border-radius:50%;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    position:relative;
    box-shadow: 0 2px 0 rgba(255,255,255,.02) inset,
                0 8px 24px rgba(0,0,0,.45);
    cursor:pointer; user-select:none;
    transition:transform .06s ease, background .08s ease;
    touch-action:manipulation;
  }
  .key:active, .key.pressed{ transform:scale(.96); background:var(--key-press); }
  .key:hover{ background:var(--key-hover); }
  .num{ font-size:34px; line-height:1; font-weight:600; }
  .letters{ margin-top:4px; font-size:11px; letter-spacing:2px; color:#cfcfd6; }

  /* Star, hash & zero use smaller letters line */
  .letters.dim{ color:#b0b0b6 }

  /* Call button */
  .call{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom: calc(78px + var(--safe-bottom));
    width:78px; height:78px; border-radius:50%;
    background:var(--accent);
    display:grid; place-items:center;
    box-shadow: 0 14px 30px rgba(10,199,90,.45);
    cursor:pointer;
    transition:transform .06s ease, filter .08s ease;
  }
  .call:active{ transform:translateX(-50%) scale(.97); filter:brightness(.95); }

  /* Bottom Tab Bar */
  .tabbar{
    position:absolute; left:0; right:0; bottom:0;
    padding-bottom: max(8px, var(--safe-bottom));
    background:rgba(12,12,12,.9);
    border-top:1px solid rgba(255,255,255,.06);
    height:86px;
    display:flex; align-items:flex-end; justify-content:space-around;
  }
  .tab{
    flex:1; text-align:center; color:#c9c9cf; padding:10px 0 8px;
    font-size:11px;
  }
  .tab .icon{display:block; margin:0 auto 4px}
  .tab.active{ color:var(--ios-blue); }
  .tab .dots{ color: currentColor }

  /* Accessibility focus ring */
  .key:focus-visible, .call:focus-visible, .tab:focus-visible{
    outline:2px solid #4da3ff; outline-offset:2px;
  }

  /* Fine-tuning sizes at smaller widths */
  @media (max-width:360px){
    .grid{ gap:14px; padding:0 24px; }
    .num{ font-size:30px }
    .call{ width:72px; height:72px }
  }
</style>
</head>
<body>
<div class="phone" role="application" aria-label="Phone Keypad">
  <!-- STATUS BAR -->
  <div class="status" aria-hidden="true">
    <div class="left" id="clock">7:26</div>
    <div class="right">
      <!-- cellular -->
      <svg class="icon" width="20" height="12" viewBox="0 0 20 12" fill="#fff" aria-hidden="true">
        <rect x="0" y="8" width="3" height="4" rx="1"></rect>
        <rect x="5" y="6" width="3" height="6" rx="1"></rect>
        <rect x="10" y="4" width="3" height="8" rx="1"></rect>
        <rect x="15" y="2" width="3" height="10" rx="1"></rect>
      </svg>
      <!-- wifi -->
      <svg class="icon" width="18" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
        <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
        <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
        <circle cx="12" cy="20" r="1.5" fill="#fff" stroke="none"></circle>
      </svg>
      <!-- battery pill -->
      <span class="pill">
        <span id="batteryPct">42</span>
      </span>
    </div>
  </div>

  <!-- NUMBER DISPLAY -->
  <div class="display" id="display" aria-live="polite"></div>
  <div class="hint" id="hint">Enter number</div>

  <!-- KEYPAD -->
  <div class="grid" role="grid" aria-label="Dial pad">
    <!-- Row 1 -->
    <button class="key" data-key="1" aria-label="1" role="gridcell">
      <span class="num">1</span>
      <span class="letters dim">&nbsp;</span>
    </button>
    <button class="key" data-key="2" data-letters="ABC" aria-label="2 A B C" role="gridcell">
      <span class="num">2</span>
      <span class="letters">ABC</span>
    </button>
    <button class="key" data-key="3" data-letters="DEF" aria-label="3 D E F" role="gridcell">
      <span class="num">3</span>
      <span class="letters">DEF</span>
    </button>
    <!-- Row 2 -->
    <button class="key" data-key="4" data-letters="GHI" aria-label="4 G H I" role="gridcell">
      <span class="num">4</span>
      <span class="letters">GHI</span>
    </button>
    <button class="key" data-key="5" data-letters="JKL" aria-label="5 J K L" role="gridcell">
      <span class="num">5</span>
      <span class="letters">JKL</span>
    </button>
    <button class="key" data-key="6" data-letters="MNO" aria-label="6 M N O" role="gridcell">
      <span class="num">6</span>
      <span class="letters">MNO</span>
    </button>
    <!-- Row 3 -->
    <button class="key" data-key="7" data-letters="PQRS" aria-label="7 P Q R S" role="gridcell">
      <span class="num">7</span>
      <span class="letters">PQRS</span>
    </button>
    <button class="key" data-key="8" data-letters="TUV" aria-label="8 T U V" role="gridcell">
      <span class="num">8</span>
      <span class="letters">TUV</span>
    </button>
    <button class="key" data-key="9" data-letters="WXYZ" aria-label="9 W X Y Z" role="gridcell">
      <span class="num">9</span>
      <span class="letters">WXYZ</span>
    </button>
    <!-- Row 4 -->
    <button class="key" data-key="*" aria-label="Star" role="gridcell">
      <span class="num">*</span>
      <span class="letters dim">&nbsp;</span>
    </button>
    <button class="key" data-key="0" data-letters="+" aria-label="0 plus" role="gridcell" id="zeroKey">
      <span class="num">0</span>
      <span class="letters">+</span>
    </button>
    <button class="key" data-key="#" aria-label="Pound" role="gridcell">
      <span class="num">#</span>
      <span class="letters dim">&nbsp;</span>
    </button>
  </div>

  <!-- CALL BUTTON -->
  <button class="call" id="call" aria-label="Call">
    <svg width="34" height="34" viewBox="0 0 24 24" fill="#fff" aria-hidden="true">
      <path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.05-.24c1.15.38 2.39.59 3.54.59a1 1 0 0 1 1 1V20a1 1 0 0 1-1 1C10.07 21 3 13.93 3 5a1 1 0 0 1 1-1h3.47a1 1 0 0 1 1 1c0 1.15.21 2.39.59 3.54a1 1 0 0 1-.24 1.05l-2.2 2.2z"/>
    </svg>
  </button>

  <!-- TAB BAR -->
  <nav class="tabbar" aria-label="Tabs">
    <button class="tab" aria-label="Favorites">
      <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="#c9c9cf" aria-hidden="true">
        <path d="M12 18l-6.16 3.24 1.18-6.88L2 8.76l6.92-1L12 1.5 15.08 7.8 22 8.76l-4.99 5.6 1.18 6.88z"/>
      </svg>
      Favorites
    </button>
    <button class="tab" aria-label="Recents">
      <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#c9c9cf" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="9"/>
        <path d="M12 7v5l3 3"/>
      </svg>
      Recents
    </button>
    <button class="tab" aria-label="Contacts">
      <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="#c9c9cf" aria-hidden="true">
        <circle cx="12" cy="8" r="4"/>
        <path d="M4 21c0-4.42 3.58-8 8-8s8 3.58 8 8" fill="#c9c9cf"/>
      </svg>
      Contacts
    </button>
    <button class="tab active" aria-current="page" aria-label="Keypad">
      <svg class="icon dots" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <circle cx="6" cy="6" r="2.2"/><circle cx="12" cy="6" r="2.2"/><circle cx="18" cy="6" r="2.2"/>
        <circle cx="6" cy="12" r="2.2"/><circle cx="12" cy="12" r="2.2"/><circle cx="18" cy="12" r="2.2"/>
        <circle cx="6" cy="18" r="2.2"/><circle cx="12" cy="18" r="2.2"/><circle cx="18" cy="18" r="2.2"/>
      </svg>
      Keypad
    </button>
    <button class="tab" aria-label="Voicemail">
      <svg class="icon" width="28" height="24" viewBox="0 0 28 24" fill="none" stroke="#c9c9cf" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="8" cy="12" r="6"/><circle cx="20" cy="12" r="6"/><path d="M14 18h0"/>
        <path d="M2 18h24"/>
      </svg>
      Voicemail
    </button>
  </nav>
</div>

<script>
/* --------- Dial Pad Logic + DTMF (Web Audio) ---------- */
(() => {
  const display = document.getElementById('display');
  const hint = document.getElementById('hint');
  const keys = Array.from(document.querySelectorAll('.key'));
  const callBtn = document.getElementById('call');
  const zeroKey = document.getElementById('zeroKey');

  let value = '';
  let pressTimer = null;
  let ctx, gain;
  const TONES = {
    '1':[1209,697],'2':[1336,697],'3':[1477,697],
    '4':[1209,770],'5':[1336,770],'6':[1477,770],
    '7':[1209,852],'8':[1336,852],'9':[1477,852],
    '*':[1209,941],'0':[1336,941],'#':[1477,941]
  };

  function updateDisplay(){
    display.textContent = value;
    hint.style.opacity = value.length ? 0 : 0.6;
  }

  function vibrate(ms=15){ if (navigator.vibrate) navigator.vibrate(ms); }

  function ensureAudio(){
    if (ctx) return;
    try{
      ctx = new (window.AudioContext || window.webkitAudioContext)();
      gain = ctx.createGain(); gain.gain.value = 0.06; gain.connect(ctx.destination);
    }catch(e){ /* audio not supported */ }
  }

  function startTone(k){
    ensureAudio();
    if (!ctx || !TONES[k]) return;
    stopTone();
    const [f1,f2] = TONES[k];
    const o1 = ctx.createOscillator(), o2 = ctx.createOscillator();
    o1.frequency.value = f1; o2.frequency.value = f2;
    o1.type = 'sine'; o2.type = 'sine';
    o1.connect(gain); o2.connect(gain);
    o1.start(); o2.start();
    startTone.nodes = [o1,o2];
  }
  function stopTone(){
    const nodes = startTone.nodes || [];
    nodes.forEach(n=>{ try{n.stop(); n.disconnect();}catch(_){ } });
    startTone.nodes = [];
  }

  function appendChar(ch){
    value += ch;
    updateDisplay();
  }

  function handleDown(el){
    const ch = el.dataset.key;
    el.classList.add('pressed');
    vibrate(10);
    startTone(ch);
    if (ch === '0'){
      clearTimeout(pressTimer);
      pressTimer = setTimeout(()=>{
        // convert last 0 to +
        if (value.endsWith('0')){
          value = value.slice(0,-1) + '+';
        }else{
          value += '+';
        }
        updateDisplay();
      }, 450); // long press threshold like iOS
    }
  }

  function handleUp(el){
    const ch = el.dataset.key;
    el.classList.remove('pressed');
    stopTone();
    clearTimeout(pressTimer);
    if (ch === '0'){
      // if long-press already fired to '+', skip appending '0' again
      if (value.endsWith('+')) return;
    }
    appendChar(ch);
  }

  keys.forEach(k=>{
    k.addEventListener('touchstart', e=>{ e.preventDefault(); handleDown(k); }, {passive:false});
    k.addEventListener('mousedown', ()=>handleDown(k));
    k.addEventListener('touchend', e=>{ e.preventDefault(); handleUp(k); }, {passive:false});
    k.addEventListener('mouseup', ()=>handleUp(k));
    k.addEventListener('mouseleave', ()=>{ k.classList.remove('pressed'); stopTone(); clearTimeout(pressTimer); });
    // keyboard support
    k.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); handleDown(k);} });
    k.addEventListener('keyup',   (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); handleUp(k);} });
  });

  // Call action
  callBtn.addEventListener('click', ()=>{
    vibrate(30);
    if (!value){
      // Easter egg: play tone quickly
      startTone('0'); setTimeout(stopTone, 180);
      return;
    }
    alert(`Calling ${value}...`);
  });

  // Show a live-ish clock + random battery badge, like the screenshot
  function fmt(n){ return (n<10?'0':'')+n; }
  function tickClock(){
    const now = new Date();
    const h = now.getHours();
    const m = now.getMinutes();
    const clock = document.getElementById('clock');
    clock.textContent = `${(h%12)||12}:${fmt(m)}`;
  }
  tickClock(); setInterval(tickClock, 20_000);

  // Fake battery % once per minute to feel alive
  const batt = document.getElementById('batteryPct');
  let b = 42; batt.textContent = b;
  setInterval(()=>{ b = Math.max(5, (b + (Math.random()>.5?1:-1))); batt.textContent = b; }, 60_000);

  // Allow Backspace to delete, like iOS text field
  window.addEventListener('keydown', (e)=>{
    if (e.key === 'Backspace' && value.length){
      value = value.slice(0,-1); updateDisplay(); vibrate(7);
      stopTone();
    }
  });

  // Start with empty state
  updateDisplay();
})();
</script>
</body>
</html>
